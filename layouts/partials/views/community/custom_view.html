{{/* ì™„ì „ í˜¸í™˜ ë²„ì „ (HugoBlox collection context ëŒ€ì‘) */}}

{{/* 
   âš™ï¸ 1. í˜ì´ì§€ ì»¨í…ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°
   collection ë¸”ë¡ì—ì„œ ì‹¤í–‰ë  ë•ŒëŠ” .Pages ì—†ìŒ -> .Site.RegularPages ë¡œ ëŒ€ì²´
*/}}
{{ $pages := .Pages }}
{{ if not $pages }}
  {{ with .page }}
    {{ $pages = .Site.RegularPages }}
  {{ else }}
    {{ $pages = .Site.RegularPages }}
  {{ end }}
{{ end }}

<div class="container my-5">
  <h2 class="text-center mb-4">ğŸš€ ìˆ˜í–‰ í”„ë¡œì íŠ¸</h2>

  <div class="row row-cols-1 row-cols-md-3 g-4">
    {{ range where $pages "Params.featured" true }}
      {{ $entry := . }}
      {{ $url := $entry.RelPermalink }}
      {{ $open_in_new_tab := "" }}
      {{ if $entry.Params.external_link }}
        {{ $url = $entry.Params.external_link }}
        {{ $open_in_new_tab = "target=\"_blank\" rel=\"noopener\"" }}
      {{ end }}

      {{/* ì¸ë„¤ì¼ */}}
      {{ $thumbnail := partial "blox-core/functions/get_featured_image.html" $entry }}

      {{/* ìš”ì•½ */}}
      {{ $excerpt := "" }}
      {{ if $entry.Params.summary }}
        {{ $excerpt = $entry.Params.summary | markdownify | emojify }}
      {{ else if $entry.Params.abstract }}
        {{ $excerpt = $entry.Params.abstract | markdownify | emojify | truncate (site.Params.abstract_length | default 120) }}
      {{ else if $entry.Summary }}
        {{ $excerpt = $entry.Summary }}
      {{ end }}

      <div class="col">
        <div class="card h-100 shadow-sm hover:shadow-lg border-0 bg-light">

          {{ with $thumbnail }}
            {{ $image_resized := .Resize "600x" }}
            {{ if ne $image_resized.MediaType.SubType "gif" }}
              {{ $image_resized = $image_resized.Process "webp" }}
            {{ end }}
            <a href="{{ $url }}" {{ $open_in_new_tab | safeHTMLAttr }}>
              <img src="{{ $image_resized.RelPermalink }}" 
                   class="card-img-top img-fluid" 
                   alt="{{ $entry.Title }}" 
                   loading="lazy">
            </a>
          {{ end }}

          <div class="card-body text-center">
            <h4 class="fw-bold mb-2">
              <a href="{{ $url }}" {{ $open_in_new_tab | safeHTMLAttr }}>{{ $entry.Title | markdownify }}</a>
            </h4>

            {{ with $entry.Params.subtitle }}
              <p class="text-muted small mb-3">{{ . }}</p>
            {{ end }}

            {{ with $excerpt }}
              <p class="text-secondary">{{ . | truncate 130 }}</p>
            {{ end }}

            <a href="{{ $url }}" class="btn btn-outline-primary mt-2">ìì„¸íˆ ë³´ê¸°</a>
          </div>
        </div>
      </div>
    {{ end }}
  </div>
</div>




